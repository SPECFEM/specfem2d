# title of job, and file that contains interface data r19201
title                           = Shallow water 30 Hz Source middle 4 receiver sets

# forward or adjoint simulation
SIMULATION_TYPE                 = 1   # 1 = forward, 2 = adjoint + kernels
NOISE_TOMOGRAPHY                = 0   # 0 = earthquake simulation, 1/2/3 = noise simulation
SAVE_FORWARD                    = .false.  # save the last frame, needed for adjoint simulation

# parameters concerning partitioning
nproc                           = 1              # number of processes
partitioning_method             = 3              # ascending order = 1, Scotch = 3
PERFORM_CUTHILL_MCKEE           = .true.         # perform inverse Cuthill-McKee (1969) optimization/permutation for mesh numbering
                                                 

ngnod                           = 9              # number of control nodes per element (4 or 9)
initialfield                    = .false.        # use a plane wave as source or not
add_Bielak_conditions           = .false.        # add Bielak conditions or not if initial plane wave
assign_external_model           = .false.        # define external earth model or not
READ_EXTERNAL_SEP_FILE          = .false.        # Read external SEP file from DATA/model_velocity.dat_input, or use routine
TURN_ATTENUATION_ON             = .false.        # turn attenuation on or off for solid medium
TURN_VISCATTENUATION_ON         = .false.        # turn viscous attenuation on or off 
Q0                              =  1             # quality factor for viscous attenuation
freq0                           =  10            # frequency for viscous attenuation
p_sv                            = .true.         # set the type of calculation (P-SV or SH/membrane waves)

# time step parameters
nt                              = 2400           # total number of time steps
deltat                          = 5.d-7          # duration of a time step
USER_T0                         = 0.0d0          # use this t0 as earliest starting time rather than the automatically calculated one

# source parameters
NSOURCES                         = 1              # number of sources [source info read in CMTSOLUTION file]
force_normal_to_surface         = .false.        # angleforce normal to surface (external mesh and curve file needed)

# constants for attenuation 
N_SLS                           = 2                      # number of standard linear solids for attenuation
f0_attenuation                  = 5.196152422706633      # (Hz) relevant only if source is a Dirac or a Heaviside, else it is f0

# receiver set parameters for seismograms
seismotype                      = 4              # record 1=displ 2=veloc 3=accel 4=pressure
generate_STATIONS               = .true.         # creates a STATION file in ./DATA
nreceiversets                   = 1              # number of receiver sets
anglerec                        = 0.d0           # angle to rotate components at receivers
rec_normal_to_surface           = .false.        # replace anglerec with the normal to the surface (external mesh and curve file needed, anglerec above ignored)
SU_FORMAT                       = .false.        # output seismograms in Seismic Unix format (adjoint traces will be read in the same format)

# first receiver set
nrec                            = 11             # number of receivers
xdeb                            = -0.5          # first receiver x in meters
zdeb                            = 0.5          # first receiver z in meters
xfin                            = 0.5          # last receiver x in meters (ignored if onlyone receiver)
zfin                            = 0.5          # last receiver z in meters (ignored if onlyone receiver)
enreg_surf_same_vertical        = .false.         # receivers inside the medium or at the surface

# display parameters
NTSTEP_BETWEEN_OUTPUT_INFO      = 300            # display frequency in time steps
output_postscript_snapshot      = .false.         # output Postscript snapshot of the results
output_color_image              = .true.         # output color image of the results
imagetype                       = 4              # display 1=displ 2=veloc 3=accel 4=pressure
cutsnaps                        = 1.             # minimum amplitude in % for snapshots
meshvect                        = .true.         # display mesh on vector plots or not
modelvect                       = .false.        # display velocity model on vector plots
boundvect                       = .true.         # display boundary conditions on plots
interpol                        = .true.         # interpolation of the display or not
pointsdisp                      = 6              # points for interpolation of display (set to 1 for lower-left corner only)
subsamp_postscript              = 1              # subsampling of color snapshots
factor_subsample_image          = 1              # factor to subsample color images output by the code (useful for very large models)
POWER_DISPLAY_COLOR             = 0.30d0         # non linear display to enhance small amplitudes in color images
DRAW_WATER_CONSTANT_BLUE_IN_JPG = .true.         # display acoustic layers as constant blue in JPEG images, because they likely correspond to water
sizemax_arrows                  = 1.d0           # maximum size of arrows on vector plots in cm
US_LETTER                       = .false.        # US letter paper or European A4
USE_SNAPSHOT_NUMBER_IN_FILENAME = .false.        # use snapshot number in the file name of JPEG color snapshots instead of the time step
gnuplot                         = .false.        # generate a GNUPLOT file for the grid
output_grid                     = .false.        # save the grid in a text file or not
output_energy                   = .false.        # compute and output acoustic and elastic energy (slows down the code significantly)
output_wavefield_snapshot       = .false.        # output Ux,Uy,Uz text file for each output time (big files)

# velocity and density models
nbmodels                        = 2              # nb of different models
# define models as I: (model_number,1,rho,Vp,Vs,0,0,QKappa Qmu) or II: (model_number,2,rho,c11,c13,c15,c33,c35,c55) or III: (model_number,3,rhos,rhof,phi,c,kxx,kxz,kzz,Ks,Kf,Kfr,etaf,mufr,Qmu).
# For istropic elastic/acoustic material use I and set Vs to zero to make a given model acoustic, for anisotropic elastic use II, 
# and for isotropic poroelastic material use III. The mesh can contain acoustic, elastic, & poroelastic models simultaneously
1 1 2000.d0 1680.d0 0.0d0 0 0 10.d0 10.d0 0 0 0 0 0 0
2 1 1000.d0 1477.d0 0.0d0 0 0 10.d0 10.d0 0 0 0 0 0 0
#3 3 2650.d0 1000.0d0  0.4 1.25 1d-10 0.0 1d-10 3.6d10 2.25d9 2d9 0.0d-4 3.204d9 10.d0
#2 1 2500.d0 5000.d0 2500.0d0  0 0 10.d0 10.d0 0 0 0 0 0 0
#3 1 2200.d0 2500.d0 1443.375d0 0 0 10.d0 10.d0 0 0 0 0 0 0
#4 3 2200.d0 786.3d0  0.4 2.0 1d-11 0.0 1d-11 5.341d9 2d9 3d9 0.0d-4 3.204d9 10.d0
#5 2 2500.d0 169.d9 122.d9 0.d0 169.d9 0.d0 75.3d9 0 0 0 0 0 0
#4 1 2200.d0 2200.d0 1343.375d0 0 0 10.d0 10.d0 0 0 0 0 0 0

# external mesh or not
read_external_mesh              = .true.

# absorbing boundary active or not
absorbing_conditions            = .true.

# for horizontal periodic conditions: detect common points between left and right edges
ADD_PERIODIC_CONDITIONS         = .false.

# horizontal periodicity distance for periodic conditions
PERIODIC_horiz_dist             = 0.3597d0

# grid point detection tolerance for periodic conditions
PERIODIC_DETECT_TOL             = 3.3334d-6

#-----------------------------------------------------------------------------
# PARAMETERS FOR EXTERNAL MESHING

# data concerning mesh, when generated using third-party app (more info in README)
# (see also absorbing_conditions above)
mesh_file                       = Mesh_SqrCirc   # file containing the mesh
nodes_coords_file               = Nodes_SqrCirc    # file containing the nodes coordinates
materials_file                  = Material_SqrCirc  # file containing the material number for each element
free_surface_file               = Surf_free_SqrCirc   # file containing the free surface
absorbing_surface_file          = Surf_abs_SqrCirc   # file containing the absorbing surface
tangential_detection_curve_file = ./DATA/courbe_eros_nodes # file containing the curve delimiting the velocity model

#-----------------------------------------------------------------------------
# PARAMETERS FOR INTERNAL MESHING

# file containing interfaces for internal mesh
interfacesfile                  = Interface_flat_ASM_DGA_119_62kHz.dat

# geometry of the model (origin lower-left corner = 0,0) and mesh description
xmin                            = -1.d0           # abscissa of left side of the model
xmax                            = 4.d0        # abscissa of right side of the model# file containing interfaces for internal mesh
nx                              = 835             # number of elements along X

# absorbing boundaries parameters
absorbbottom                    = .true.         
absorbright                     = .true.
absorbtop                       = .true.
absorbleft                      = .true.

# define the different regions of the model in the (nx,nz) spectral element mesh
nbregions                       = 2              # nb of regions and model number for each
1 835  1 71 1
1 835 72 96 2
#1 80 21 40 4
#1 80 41 60 3
#60 80 21 40 4
#30 40 50 60 2
#35 40 50 60 5
